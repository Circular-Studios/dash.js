!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.dash=e()}}(function(){var e;return function t(e,n,r){function o(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return o(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t){var n,r,o;o=e("../main"),r=React.createClass({render:function(){var e;return e=function(e){return React.createElement("li",{key:e.id},e.msg)},React.createElement("ul",null,this.props.items.map(e))}}),n=React.createClass({getInitialState:function(){return{items:[],keyCount:0}},log:function(e){var t,n;return t=this.state.keyCount.value,"string"==typeof e?n=this.state.items.concat([{msg:e,id:t}]):(e.id=t,n=this.state.items.concat([e])),this.setState({items:n,keyCount:t++})},render:function(){return React.createElement("div",null,React.createElement(r,{items:this.state.items}))}}),o.layout.registerElement("DashConsole",function(){return React.createElement(n,{"class":"console"})},function(e){return o.console=e}),t.exports=n},{"../main":9}],2:[function(e,t){var n,r;r=e("../main"),n=React.createClass({getInitialState:function(){return{data:[]}},onClick:function(e){return r.panels.propertyEditor.setProps({data:r.scene.objects[e]})},removeObject:function(e){return r.scene.objects.splice(e,1),this.setProps({data:r.scene.objects})},render:function(){return React.createElement("div",null,this.props.data.map(function(e,t){var n,r,o;return o=this,n=new React.DOM.span({className:"close-button",onClick:function(){return o.removeObject(t)}},"(x)"),r=new React.DOM.span({className:"node",onClick:function(){return o.onClick(t)}},e.Name,n),React.createElement(TreeView,{key:e.Name+"|"+t,nodeLabel:r,defaultCollapsed:!0},e.Children.map(function(e,t){return React.createElement(TreeView,{nodeLabel:r,key:e.Type+"|"+t,defaultCollapsed:!1},React.createElement("div",{className:"info"},e.Type))}))},this))}}),r.layout.registerElement("ObjectBrowser",function(){return React.createElement(n,{data:[]})},function(e){return r.panels.objectBrowser=e}),t.exports=n},{"../main":9}],3:[function(e,t){var n,r;r=e("../main"),n=React.createClass({getInitialState:function(){return{data:[]}},modifyProperty:function(e){return console.log(this.props.data.Components[e.target.name]),this.props.data.Components[e.target.name]=e.target.value,console.log(this.props.data.Components[e.target.name]),!0},renderProperty:function(e,t){switch(e){case"Asset":return React.createElement("input",{type:"text",name:e,size:"20",value:t,onChange:this.modifyProperty})}},saveProperties:function(){return this.props.data.save},render:function(){return React.createElement("div",null," ",this.props.data.Components.map(function(e,t){var n,r,o;return n=React.createElement("span",{className:"node"},e.Type),React.createElement(TreeView,{key:e.Type+"|"+t,nodeLabel:n,defaultCollapsed:!1},function(){var t;t=[];for(r in e)o=e[r],t.push(this.renderProperty(r,o));return t}.call(this))},this)," ")}}),r.layout.registerElement("Properties",function(){return React.createElement(n,{data:{Components:[]}})},function(e){return r.panels.propertyEditor=e}),t.exports=n},{"../main":9}],4:[function(t,n){(function(){function t(e,t,n){var r=t&&n||0,o=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>o&&(t[r+o++]=h[e])});16>o;)t[r+o++]=0;return t}function r(e,t){var n=t||0,r=d;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var o=t&&n||0,i=t||[];e=e||{};var s=null!=e.clockseq?e.clockseq:g,c=null!=e.msecs?e.msecs:(new Date).getTime(),a=null!=e.nsecs?e.nsecs:C+1,u=c-w+(a-C)/1e4;if(0>u&&null==e.clockseq&&(s=s+1&16383),(0>u||c>w)&&null==e.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");w=c,C=a,g=s,c+=122192928e5;var l=(1e4*(268435455&c)+a)%4294967296;i[o++]=l>>>24&255,i[o++]=l>>>16&255,i[o++]=l>>>8&255,i[o++]=255&l;var f=c/4294967296*1e4&268435455;i[o++]=f>>>8&255,i[o++]=255&f,i[o++]=f>>>24&15|16,i[o++]=f>>>16&255,i[o++]=s>>>8|128,i[o++]=255&s;for(var p=e.node||v,d=0;6>d;d++)i[o+d]=p[d];return t?t:r(i)}function i(e,t,n){var o=t&&n||0;"string"==typeof e&&(t="binary"==e?new p(16):null,e=null),e=e||{};var i=e.random||(e.rng||s)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var c=0;16>c;c++)t[o+c]=i[c];return t||r(i)}var s,c=this;if("function"==typeof c.require)try{var a=c.require("crypto").randomBytes;s=a&&function(){return a(16)}}catch(u){}if(!s&&c.crypto&&crypto.getRandomValues){var l=new Uint8Array(16);s=function(){return crypto.getRandomValues(l),l}}if(!s){var f=new Array(16);s=function(){for(var e,t=0;16>t;t++)0===(3&t)&&(e=4294967296*Math.random()),f[t]=e>>>((3&t)<<3)&255;return f}}for(var p="function"==typeof c.Buffer?c.Buffer:Array,d=[],h={},m=0;256>m;m++)d[m]=(m+256).toString(16).substr(1),h[d[m]]=m;var y=s(),v=[1|y[0],y[1],y[2],y[3],y[4],y[5]],g=16383&(y[6]<<8|y[7]),w=0,C=0,b=i;if(b.v1=o,b.v4=i,b.parse=t,b.unparse=r,b.BufferClass=p,"function"==typeof e&&e.amd)e(function(){return b});else if("undefined"!=typeof n&&n.exports)n.exports=b;else{var k=c.uuid;b.noConflict=function(){return c.uuid=k,b},c.uuid=b}}).call(this)},{}],5:[function(e,t){function n(e,t){var n;return n=t?new o(e,t):new o(e)}var r=function(){return this}(),o=r.WebSocket||r.MozWebSocket;t.exports=o?n:null,o&&(n.prototype=o.prototype)},{}],6:[function(e,t){var n,r,o,i;r=e("./engine"),o=e("./layout"),i=e("./scene"),n=function(){function e(){this.engine=new r(this),this.scene=new i(this),this.layout=new o(this)}return e.prototype.engine={},e.prototype.scene={},e.prototype.panels={objectBrowser:{},propertiesEditor:{}},e.prototype.console={},e.prototype.layout={},e}(),t.exports=n},{"./engine":7,"./layout":8,"./scene":10}],7:[function(e,t){var n,r,o,i,s,c,a,u,l,f;l=e("node-uuid"),f=e("ws"),i=i||f,n="__callback__",o={ok:0,error:2},c=function(e,t,n){return null==n&&(n=""),JSON.stringify({key:e,value:t,callbackId:n})},u=function(e){return new Error(e.msg,e.file,e.line)},s=function(e){return function(t){if(t.status===o.ok)return e(t.data);if(t.status===o.error)throw u(t.data)}},a=s(function(){}),r=function(){function e(e){this.dash=e,this._receiveHandlers={},this.registerReceiveHandler(n,function(e){return function(t,n){return n in e._callbackHandlers?e._callbackHandlers[n](t):console.error("Rogue callback received: ",n)}}(this))}return e.prototype.isConnected=!1,e.prototype._socket=null,e.prototype._receiveHandlers={},e.prototype._callbackHandlers={},e.prototype.onConnect=function(){},e.prototype.onDisconnect=function(){},e.prototype.onError=function(){},e.prototype.connect=function(e,t,n){return null==t&&(t="localhost"),null==n&&(n="ws"),this._socket=new i("ws://"+t+":"+e+"/"+n),this._init()},e.prototype._init=function(){this._socket.onopen=function(e){return function(){e.isConnected=!0,e.onConnect()}}(this),this._socket.onclose=function(e){return function(){e.isConnected=!1,e.onDisconnect()}}(this),this._socket.onmessage=function(e){return function(t){var r,i,s,c,u,l,f,p;if(r=JSON.parse(t.data),!r.key||!r.value)throw new Error("Invalid message format");if(r.key in e._receiveHandlers)for(p=e._receiveHandlers[r.key],l=0,f=p.length;f>l;l++){c=p[l],s={};try{u=c(r.value,r.callbackId),s.data=void 0===u?"success":u,s.status=o.ok}catch(d){i=d,s.data={msg:i.message,line:i.lineNumber,file:i.fileName},s.status=o.error}r.key!==n&&e.send(n,s,a,r.callbackId)}else console.warn("No handlers for message key "+r.key),console.log(e._receiveHandlers)}}(this),this._socket.onerror=function(e){return function(t){e.isConnected=!1,e.onError(t)}}(this)},e.prototype.disconnect=function(){return this.isConnected?this._socket.close():void 0},e.prototype.registerReceiveHandler=function(e,t){if("string"!=typeof e)throw new Error("Key must be of type string.");e in this._receiveHandlers||(this._receiveHandlers[e]=[]),this._receiveHandlers[e].push(t)},e.prototype.send=function(e,t,r,o){if(null==r&&(r=a),null==o&&(o=null),!this.isConnected)throw new Error("Not connected to server, can't send message");return e!==n&&(null===o&&(o=l.v4()),this._callbackHandlers[o]=s(r)),this._socket.send(c(e,t,o))},e.prototype.refreshGame=function(){return this.send("dgame:refresh",{})},e.prototype.refreshObject=function(e,t){var n;return n={objectName:e,description:t},this.send("object:refresh",n)},e.prototype.refreshComponent=function(e,t,n){var r;return r={objectName:e,componentName:t,description:n},this.send("object:component:refresh",r)},e}(),t.exports=r},{"node-uuid":4,ws:5}],8:[function(e,t){var n,r;n=function(){function e(){this.golden=new GoldenLayout(r),this.golden.init()}return e.prototype.registerElement=function(e,t,n){return null==n&&(n=null),this.golden.registerComponent(e,function(e,r){var o;return o=React.render(t(),e.getElement()[0]),n&&n(o),o.setState(r)})},e}(),t.exports=n,r={content:[{type:"row",content:[{type:"stack",width:15,content:[{type:"component",componentName:"ObjectBrowser",title:"Object Browser"}]},{type:"column",width:70,content:[{type:"component",componentName:"DashConnect",title:"Connect to Dash"},{type:"component",height:20,title:"Console",componentName:"DashConsole"}]},{type:"row",content:[{type:"stack",width:15,content:[{type:"component",componentName:"Properties",title:"Properties"}]}]}]}]}},{}],9:[function(e,t){var n,r;n=e("./dash"),r=new n,r.engine.registerReceiveHandler("dash:logger:message",function(e){return r.console.log(e)}),r.engine.registerReceiveHandler("dash:perf:frametime",function(){}),r.engine.registerReceiveHandler("dash:perf:zone_data",function(){}),r.engine.onConnect=function(){return r.console.log("Connected to Dash."),r.scene.getObjects(function(e){return console.log(e),r.panels.objectBrowser.setProps({data:e})})},r.layout.registerElement("DashConnect",function(){var e;return e=function(){return r.engine.connect(8008),r.console.log("Connecting to Dash...")},React.createElement("button",{className:"connect",onClick:e},"Connect to Dash")}),t.exports=r},{"./dash":6}],10:[function(e,t){var n,r;r=function(){function e(t,n){var r,o,i,s,c;this.scene=n;for(o in t)if(i=t[o],"Children"===o)for(s=0,c=i.length;c>s;s++)r=i[s],this.Children.push(new e(r,n));else this[o]=i}return e.prototype.Children=[],e.prototype.save=function(){return this.scene.dash.refreshObject(this.Name,this)},e}(),n=function(){function e(e){this.dash=e}return e.prototype.objects=[],e.prototype.GameObject=r,e.prototype.getObjects=function(e){return this.dash.engine.send("dgame:scene:get_objects",{},function(t){return function(n){var o,i,s;for(i=0,s=n.length;s>i;i++)o=n[i],t.objects.push(new r(o,t));return console.log(t.objects),console.log(n),e(t.objects)}}(this))},e}(),t.exports=n},{}]},{},[1,2,3])(3)});